# 背景デザイン構成

## 概要
登山道ポータルの背景に山の写真を使用し、サイドバーをガラスモルフィズムデザインで透過させた構成。

---

## 元画像

### ファイル情報
- **ファイル名**: `static/mountain_2.webp`
- **サイズ**: 約576KB
- **内容**: 富士山が見える山並みの写真（青空 + 山々 + 登山者）
- **形式**: WebP（最適化済み）

---

## レイヤー構造

### 1. Body背景（全体）

```css
body {
  background-color: #f8f9fa;
  background-image:
    /* レイヤー1: 上から下へのグラデーション */
    linear-gradient(to bottom,
      rgba(248, 249, 250, 0) 0%,      /* 上50%: 完全に透明（写真が見える）*/
      rgba(248, 249, 250, 0) 50%,
      rgba(248, 249, 250, 0.75) 80%,  /* 80%: 少し白く */
      rgba(248, 249, 250, 0.95) 100%  /* 下部: ほぼ白（フェードアウト）*/
    ),
    /* レイヤー2: 山の写真 */
    url('{% static "mountain_2.webp" %}');

  background-size: cover;
  background-position: center top;  /* 上部中央配置 */
  background-repeat: no-repeat;
  background-attachment: fixed;     /* スクロールしても固定 */
}
```

**効果**:
- 青空と富士山がはっきり見える
- 下にスクロールすると徐々に白くなる
- 登山者は下部グラデーションで自然に消える

---

### 2. サイドバー背景（ガラスモルフィズム）

```css
#sidebar {
  width: 250px;
  height: 100vh;
  padding: 24px 20px;
  border-right: none;
  flex-shrink: 0;
  overflow-y: auto;
  position: relative;

  /* サイドバー自体に背景画像を配置 */
  background-image: url('{% static "mountain_2.webp" %}');
  background-size: cover;
  background-position: left center;  /* 左側を表示 */

  /* 影で境界を表現 */
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
}

/* 半透明レイヤー */
#sidebar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.5);    /* 50%透明の白 */
  backdrop-filter: blur(15px);              /* ぼかし効果 */
  -webkit-backdrop-filter: blur(15px);      /* Safari対応 */
  z-index: 0;
}

/* サイドバーの子要素を前面に */
#sidebar > * {
  position: relative;
  z-index: 1;
}
```

**効果**:
- サイドバー部分だけ山の写真が透けて見える
- 透明度50% + ぼかし15pxで「白くぼやけたガラス」のような質感
- backdrop-filterのぼかし効果が強いため、実際には透明度よりも白っぽく見える

---

## 視覚的な構造

```
┌─────────────────────────────────────────────┐
│ Body全体（mountain_2.webp + グラデーション）│
│                                             │
│ ┌──────────┬─────────────────────────────┐│
│ │サイドバー │ メインコンテンツ            ││
│ │          │                             ││
│ │山の写真  │ 白いエリア                  ││
│ │  +       │ （背景が透けて見える）      ││
│ │50%透明白 │                             ││
│ │  +       │                             ││
│ │ぼかし15px│                             ││
│ │          │                             ││
│ │→白くぼや │                             ││
│ │  けた    │                             ││
│ │  ガラス  │                             ││
│ └──────────┴─────────────────────────────┘│
│            ↓ 下に行くほど白くなる          │
└─────────────────────────────────────────────┘
```

---

## デザインのポイント

1. **同じ写真を2箇所で使用**: bodyとサイドバー
   - 効率的（1つの画像を使い回し）
   - 統一感（全体で同じ山の風景）

2. **ガラスモルフィズム効果**:
   - 透明度: 50%（rgba 0.5）
   - ぼかし: 15px
   - **重要**: ぼかし効果が強いため、透明度50%でも実際にはかなり白く見える

3. **境界の処理**:
   - border-rightではなくbox-shadowで自然な境界
   - 影: `2px 0 8px rgba(0, 0, 0, 0.1)`

4. **モバイル対応**:
   - サイドバーの透明度を60%に調整（デスクトップは50%）
   - ハンバーガーメニューでスライド表示

---

## なぜ「透明度50%」に見えないのか？

設定上は `rgba(255, 255, 255, 0.5)` = 50%透明の白ですが、実際には：

1. **backdrop-filter: blur(15px)** のぼかし効果が強い
2. 背景の山の写真が完全にぼやけて色が混ざる
3. 結果として「白くぼやけたガラス」のように見える

これがガラスモルフィズムの特徴です。透明度よりもぼかしの視覚的影響が大きい。

---

## パフォーマンス

- **画像サイズ**: 576KB（WebP最適化済み）
- **読み込み**: 同じ画像を使い回しているため、キャッシュ効率が良い
- **backdrop-filter**: モダンブラウザで対応（Safari用に-webkit-プレフィックスあり）

---

## 作成日
2026-01-09
